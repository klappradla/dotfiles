#!/usr/bin/env bash
#
# dots
#
# `dots` handles installation, updates, things like that. Run it periodically
# to make sure you're on the latest and greatest.

set -o errexit
set -o nounset
set -o pipefail

readonly RED="\033[0;31m"
readonly NO_COLOR="\033[0m"
readonly DOTFILES="$HOME/dotfiles"

display_usage_info() {
  echo "dots -- manage dotfiles"
  echo ""
  echo "Usage: dots [options]"
  echo ""
	echo "  -i, --install   Install dotfiles"
	echo "  -u, --update    Update dotfiles"
	echo "  -e, --edit      Open dotfiles directory for editing"
	echo "  -h, --help      Show this help message and exit"
	exit
}

install_dotfiles() {
  "$DOTFILES/scripts/install.sh"
}

update_dotfiles() {
  "$DOTFILES/scripts/install.sh" -f
}

edit_dotfiles() {
  cd "$DOTFILES"
  exec "$EDITOR" "$DOTFILES"
  exit
}

display_invalid_usage() {
  echo "$RED""Invalid option: ""$NO_COLOR""$1"
  echo ""
  display_usage_info
}

[ $# -eq 0 ] && display_usage_info
if [ $# -gt 0 ]; then
  option=$1
  case $option in
    "-h"|"--help") display_usage_info;;
    "-e"|"--edit") edit_dotfiles;;
    "-u"|"--update") update_dotfiles;;
    "-i"|"--install") install_dotfiles;;
    *) display_invalid_usage "$option";;
  esac
fi
