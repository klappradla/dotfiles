" Vim plug
call plug#begin('~/.vim/plugged')
Plug 'ctrlpvim/ctrlp.vim'
Plug 'scrooloose/nerdtree'
Plug 'itchyny/lightline.vim'
Plug 'altercation/vim-colors-solarized'
Plug 'rust-lang/rust.vim'
Plug 'elixir-lang/vim-elixir'
Plug 'tpope/vim-commentary'
Plug 'slim-template/vim-slim'
Plug 'vim-multiple-cursors'
call plug#end()

" Plugin specific config
" NERDTree
let NERDTreeShowHidden=1
let g:NERDTreeWinSize=25
" CTRLP
let g:ctrlp_show_hidden=1
set wildignore+=*/tmp/*,*.so,*.swp,*.zip
" lighline
set laststatus=2
let g:lightline = {'colorscheme': 'solarized'}

" globals
set nocompatible                " vim not vi mode
set mouse=a                     " allow mouse in all modes
set ruler                       " show cursor position
set nobackup                    " disable backups
set nowritebackup               " write file in place
set noswapfile                  " no .swap files
set encoding=utf-8              " set encoding to utf-8
set backspace=indent,eol,start  " make backspace behave 'normal'
set ttimeoutlen=50              " faster timeout for switching modes
set autoread                    " automatically reload buffers
set autowrite                   " automatically save changes when switching buffers

" search
set incsearch   " incremental search
set ignorecase  " seach case insensitive...
set smartcase   " ... unless it contains capital letter
" Use The Silver Searcher https://github.com/ggreer/the_silver_searcher
if executable('ag')
  " Use Ag over Grep
  set grepprg=ag\ --nogroup\ --nocolor

  " Use ag in CtrlP for listing files. Lightning fast and respects .gitignore
  let g:ctrlp_user_command = 'ag -Q -l --nocolor --hidden -g "" %s'

  " ag is fast enough that CtrlP doesn't need to cache
  let g:ctrlp_use_caching = 0

  if !exists(":Ag")
    command -nargs=+ -complete=file -bar Ag silent! grep! <args>|cwindow|redraw!
    nnoremap \ :Ag<SPACE>
  endif
endif

" navigation
nnoremap <C-J> <C-W><C-J>    " faster split navigation
nnoremap <C-K> <C-W><C-K>
nnoremap <C-L> <C-W><C-L>
nnoremap <C-H> <C-W><C-H>
:inoremap jj <Esc>

" set tabsize to 2 (softtabs)
set tabstop=2
set shiftwidth=2
set shiftround
set expandtab

" language specific settings
let ruby_operators = 1       " ad ruby operators
filetype on                  " filetype detection
filetype plugin on
filetype plugin indent on    " filetype matching indention

" spelling
autocmd BufRead,BufNewFile *.md setlocal spell   " spell check for markdown files
set complete+=kspell                             " autocomplete words

" appearance
syntax on
set background=dark
let g:solarized_termtrans = 1
colorscheme solarized
set colorcolumn=80              " highlight 80 char column
syntax enable                   " enable syntax highlighting
set number                      " show line numbers
set noshowmode                  " hide default status line
